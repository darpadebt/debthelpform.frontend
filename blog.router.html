<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Loading blog post… | Debt Help Form</title>
  <meta name="description" content="Loading the requested Debt Help Form blog article." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://debthelpform.com/blog/" />
  <meta property="og:title" content="Debt Help Form — Blog &amp; Guides" />
  <meta property="og:description" content="Debt Help Form blog — FTC‑aligned guides about debt consolidation and settlement." />
  <meta property="og:image" content="https://debthelpform.com/debt-relief-couple.png" />
  <link rel="icon" href="/debt-relief-couple.png" />
  <link rel="apple-touch-icon" href="/debt-relief-couple.png" />
  <style>
    :root{--bg:#f8fafc;--text:#0f172a;--muted:#475569;--brand:#0ea5e9;--surface:#ffffff;--shadow:0 10px 30px rgba(2,6,23,.08)}
    *{box-sizing:border-box}
    body{margin:0;padding:0;min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:var(--bg);color:var(--text)}
    .card{max-width:520px;width:100%;background:var(--surface);padding:24px;border-radius:18px;border:1px solid #e2e8f0;box-shadow:var(--shadow);text-align:center}
    h1{margin:0 0 10px;font-size:22px;font-weight:800}
    p{margin:0 0 14px;color:var(--muted);line-height:1.55}
    .spinner{width:34px;height:34px;border:4px solid #e2e8f0;border-top-color:var(--brand);border-radius:50%;margin:0 auto 14px;animation:spin 1s linear infinite}
    a.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:999px;background:linear-gradient(135deg,var(--brand),#38bdf8);color:#fff;font-weight:700;text-decoration:none;box-shadow:0 10px 22px rgba(14,165,233,.25)}
    a.btn:hover{text-decoration:none;opacity:.95}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
  <script src="/ab015.sitewide.js" defer></script>
  <script src="/ab015.apply.js" defer></script>
  <script src="/eng038.sitewide.js" defer></script>
</head>
<body>
  <div class="card" id="statusCard" role="status" aria-live="polite">
    <div class="spinner" aria-hidden="true"></div>
    <h1 data-ab-slot="hero_headline">Loading article…</h1>
    <p>We’re fetching the blog post for you.</p>
    <!-- AB015 slot hygiene fix -->
    <p id="fallback" style="display:none"><a class="btn" href="/blog.index.html">Go to blog index</a></p>
  </div>

  <script>
    (function(){
      const statusCard=document.getElementById('statusCard');
      const fallback=document.getElementById('fallback');

      function showError(message){
        statusCard.querySelector('h1').textContent='Post not found';
        statusCard.querySelector('p').textContent=message||'Please return to the blog index to browse recent articles.';
        fallback.style.display='block';
      }

      function extractSlug(){
        const url=new URL(window.location.href);
        const path=url.pathname.replace(/\/+$/,'');
        const match=path.match(/\/blog\/(.+?)(?:\.html)?$/i);
        if(match&&match[1]){
          try{return decodeURIComponent(match[1]);}catch(_){return match[1];}
        }

        // Fallback: allow /blog.router.html?slug=my-post
        const fromQuery=url.searchParams.get('slug');
        if(fromQuery){
          try{return decodeURIComponent(fromQuery);}catch(_){return fromQuery;}
        }

        // Fallback: derive slug from a content_url/url query param
        const fromUrl=url.searchParams.get('content_url')||url.searchParams.get('url');
        const normalized=normalizeSlug(fromUrl);
        return normalized||null;
      }

      function normalizeSlug(candidate){
        if(!candidate) return null;
        // Strip any leading slash or /blog/ prefix
        let s=candidate.replace(/^\/+/, '').replace(/^blog\//i,'');
        // Strip date prefixes like 2025-08-03-
        s=s.replace(/^\d{4}-\d{2}-\d{2}-/,'');
        // Drop trailing .html if present
        s=s.replace(/\.html$/i,'');
        return s;
      }

      async function load(){
        const slug=extractSlug();
        if(!slug){
          showError('Missing blog slug in the URL.');
          return;
        }

        try{
          const res=await fetch('/blogs.json',{cache:'no-store'});
          if(!res.ok) throw new Error('Failed to load blog index');
          const list=await res.json();
          const posts=Array.isArray(list)?list:[];

          const slugVariants=[slug, normalizeSlug(slug)].filter(Boolean);
          const match=posts.find(p=>{
            if(!p) return false;
            const possible=[p.slug, normalizeSlug(p.content_url), normalizeSlug(p.url)];
            return slugVariants.some(s=>possible.includes(s));
          });

          if(!match){
            showError('We could not find that article.');
            return;
          }

          const target=match.content_url||match.url||`/blog/${match.slug||slug}.html`;
          window.location.replace(target);
        }catch(err){
          console.error(err);
          showError('There was a problem loading the article.');
        }
      }

      load();
    })();
  </script>
</body>
</html>
